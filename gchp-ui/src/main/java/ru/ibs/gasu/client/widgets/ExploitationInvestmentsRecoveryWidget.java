package ru.ibs.gasu.client.widgets;

import com.google.gwt.core.client.GWT;
import ru.ibs.gasu.common.models.PlanFactIndicator;

import java.util.stream.Collectors;

public class ExploitationInvestmentsRecoveryWidget extends InvestmentsWidget {
    @Override
    protected void setUpBaseIndicators() {

        getYearBox().deselectAll();

        PlanFactIndicator planFactIndicator5 = new PlanFactIndicator();
        planFactIndicator5.setGid(5L);
        planFactIndicator5.setNameOrYear("Субсидии на эксплуатационные расходы (эксплуатационный платеж)");

        PlanFactIndicator planFactIndicator6 = new PlanFactIndicator();
        planFactIndicator6.setGid(6L);
        planFactIndicator6.setNameOrYear("Субсидии на возмещение инвестиций (инвестиционный платеж)");

        getTreeStore().add(planFactIndicator5);
        getTreeStore().add(planFactIndicator6);
    }

    @Override
    public void addRootRowById(Long id) {
        PlanFactIndicator planFactIndicator5 = new PlanFactIndicator();
        planFactIndicator5.setGid(5L);
        planFactIndicator5.setNameOrYear("Субсидии на эксплуатационные расходы (эксплуатационный платеж)");

        PlanFactIndicator planFactIndicator6 = new PlanFactIndicator();
        planFactIndicator6.setGid(6L);
        planFactIndicator6.setNameOrYear("Субсидии на возмещение инвестиций (инвестиционный платеж)");

        if (!getTreeStore().getRootItems().stream().map(i -> i.getGid()).collect(Collectors.toList()).contains(id)) {
            GWT.log("not contains ");
            if (5L == id) {
                getTreeStore().add(planFactIndicator5);
                addCurrentYearsToRootIndicator(planFactIndicator5);
            }

            if (6L == id) {
                getTreeStore().add(planFactIndicator6);
                addCurrentYearsToRootIndicator(planFactIndicator6);
            }

        }
    }
}
